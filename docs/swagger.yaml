basePath: /api
definitions:
  campaign.Campaign:
    properties:
      category:
        type: string
      created_at:
        type: string
      description:
        type: string
      end_date:
        type: string
      goal:
        type: number
      id:
        type: string
      image:
        type: string
      location:
        type: string
      organizer:
        type: string
      start_date:
        type: string
      status:
        type: string
      title:
        type: string
      urgency:
        type: integer
    type: object
  campaigncategory.CampaignCategory:
    properties:
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
    type: object
  donation.Donation:
    properties:
      amount:
        type: number
      campaign_id:
        type: string
      date:
        type: string
      donor_id:
        type: string
      id:
        type: string
      is_anonymous:
        type: boolean
      message:
        type: string
      payment_method:
        $ref: '#/definitions/donation.PaymentMethod'
      status:
        $ref: '#/definitions/donation.DonationStatus'
    type: object
  donation.DonationStatus:
    enum:
    - completed
    - pending
    - failed
    - refunded
    type: string
    x-enum-varnames:
    - DonationStatusCompleted
    - DonationStatusPending
    - DonationStatusFailed
    - DonationStatusRefunded
  donation.PaymentMethod:
    enum:
    - MercadoPago
    - Transferencia
    - Efectivo
    - Tarjeta
    type: string
    x-enum-varnames:
    - PaymentMethodMercadoPago
    - PaymentMethodTransferencia
    - PaymentMethodEfectivo
    - PaymentMethodTarjeta
  donor.Donor:
    properties:
      email:
        type: string
      first_name:
        type: string
      id:
        type: string
      is_verified:
        type: boolean
      last_name:
        type: string
      phone:
        type: string
    type: object
  errors.APIError:
    properties:
      code:
        example: 400
        type: integer
      message:
        example: Invalid request format
        type: string
    type: object
  organizer.Organizer:
    properties:
      avatar:
        type: string
      created_at:
        type: string
      id:
        type: string
      name:
        type: string
      verified:
        type: boolean
    type: object
  rbac.CheckPermissionRequest:
    properties:
      permission:
        type: string
    required:
    - permission
    type: object
  rbac.LocalAuthContext:
    properties:
      permissions:
        items:
          type: string
        type: array
      role_id:
        type: string
      role_name:
        type: string
      user_id:
        type: string
    type: object
  rbac.Permission:
    properties:
      action:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      resource:
        type: string
    type: object
  rbac.Role:
    properties:
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      updated_at:
        type: string
    type: object
  user.AuthToken:
    properties:
      access_token:
        type: string
      expires_in:
        description: in seconds
        type: integer
      token_type:
        type: string
    type: object
  user.GetUserResponseDTO:
    properties:
      user:
        $ref: '#/definitions/user.User'
    type: object
  user.LoginDTO:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: strongpassword123
        type: string
    type: object
  user.LoginResponseDTO:
    properties:
      token:
        $ref: '#/definitions/user.AuthToken'
    type: object
  user.MeResponseDTO:
    properties:
      created_at:
        example: "2024-01-01T00:00:00Z"
        type: string
      email:
        example: user@email.com
        type: string
      first_name:
        example: Juan
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      is_active:
        example: true
        type: boolean
      last_name:
        example: PÃ©rez
        type: string
      role:
        $ref: '#/definitions/user.RoleInfo'
      updated_at:
        example: "2024-01-01T00:00:00Z"
        type: string
    type: object
  user.RegisterDTO:
    properties:
      email:
        example: user@example.com
        type: string
      first_name:
        example: John
        type: string
      last_name:
        example: Doe
        type: string
      password:
        example: strongpassword123
        type: string
    type: object
  user.RegisterResponseDTO:
    properties:
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  user.RequestPasswordResetDTO:
    properties:
      email:
        example: user@example.com
        type: string
    type: object
  user.ResetPasswordDTO:
    properties:
      new_password:
        example: newpassword123
        type: string
      token:
        example: reset-token-123
        type: string
    type: object
  user.RoleInfo:
    properties:
      id:
        example: 550e8400-e29b-41d4-a716-446655440001
        type: string
      name:
        example: admin
        type: string
    type: object
  user.UpdatePasswordDTO:
    properties:
      current_password:
        example: oldpassword123
        type: string
      new_password:
        example: newpassword123
        type: string
    type: object
  user.UpdateUserDTO:
    properties:
      first_name:
        example: John
        type: string
      last_name:
        example: Doe
        type: string
    type: object
  user.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      first_name:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      is_verified:
        type: boolean
      last_login:
        type: string
      last_name:
        type: string
      role_id:
        type: string
      updated_at:
        type: string
    type: object
host: localhost:9999
info:
  contact:
    email: support@donatutti.com
    name: API Support
  description: API for managing donations and campaigns in the Dona Tutti platform
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: Dona Tutti API
  version: "1.0"
paths:
  /api/donations/campaign/{id}:
    get:
      consumes:
      - application/json
      description: Get a list of donations for a specific campaign
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/donation.Donation'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List donations by campaign
      tags:
      - donations
  /auth/check-permission:
    get:
      consumes:
      - application/json
      description: Check if the current user has a specific permission
      parameters:
      - description: Permission check request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/rbac.CheckPermissionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: boolean
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: Check user permission
      tags:
      - auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login with email and password
      parameters:
      - description: Login credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/user.LoginDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.LoginResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Login user
      tags:
      - auth
  /auth/password-reset/request:
    post:
      consumes:
      - application/json
      description: Request a password reset token
      parameters:
      - description: Email for password reset
        in: body
        name: email
        required: true
        schema:
          $ref: '#/definitions/user.RequestPasswordResetDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Request password reset
      tags:
      - auth
  /auth/password-reset/reset:
    post:
      consumes:
      - application/json
      description: Reset password using token
      parameters:
      - description: Password reset details
        in: body
        name: reset
        required: true
        schema:
          $ref: '#/definitions/user.ResetPasswordDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Reset password
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Register a new user with the provided details
      parameters:
      - description: User registration details
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.RegisterDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/user.RegisterResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Register a new user
      tags:
      - auth
  /auth/user-context:
    get:
      consumes:
      - application/json
      description: Get the current user's authentication context including role and
        permissions
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rbac.LocalAuthContext'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: Get user context
      tags:
      - auth
  /campaigns:
    get:
      consumes:
      - application/json
      description: Get a list of all campaigns
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/campaign.Campaign'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List all campaigns
      tags:
      - campaigns
    post:
      consumes:
      - application/json
      description: Create a new campaign with the provided details
      parameters:
      - description: Campaign details
        in: body
        name: campaign
        required: true
        schema:
          $ref: '#/definitions/campaign.Campaign'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/campaign.Campaign'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Create a new campaign
      tags:
      - campaigns
  /campaigns/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a campaign by ID
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Delete a campaign
      tags:
      - campaigns
    get:
      consumes:
      - application/json
      description: Get campaign details by ID
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/campaign.Campaign'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Get campaign by ID
      tags:
      - campaigns
    put:
      consumes:
      - application/json
      description: Update campaign details by ID
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: string
      - description: Campaign details
        in: body
        name: campaign
        required: true
        schema:
          $ref: '#/definitions/campaign.Campaign'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update campaign details
      tags:
      - campaigns
  /categories:
    get:
      consumes:
      - application/json
      description: Get a list of all campaign categories
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/campaigncategory.CampaignCategory'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List all categories
      tags:
      - categories
    post:
      consumes:
      - application/json
      description: Create a new campaign category with the provided details
      parameters:
      - description: Category details
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/campaigncategory.CampaignCategory'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/campaigncategory.CampaignCategory'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Create a new category
      tags:
      - categories
  /categories/{id}:
    get:
      consumes:
      - application/json
      description: Get category details by ID
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/campaigncategory.CampaignCategory'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Get category by ID
      tags:
      - categories
    put:
      consumes:
      - application/json
      description: Update category details by ID
      parameters:
      - description: Category ID
        in: path
        name: id
        required: true
        type: string
      - description: Category details
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/campaigncategory.CampaignCategory'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update category details
      tags:
      - categories
  /donations:
    get:
      consumes:
      - application/json
      description: Get a list of all donations
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/donation.Donation'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List all donations
      tags:
      - donations
    post:
      consumes:
      - application/json
      description: Create a new donation with the provided details
      parameters:
      - description: Donation details
        in: body
        name: donation
        required: true
        schema:
          $ref: '#/definitions/donation.Donation'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/donation.Donation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Create a new donation
      tags:
      - donations
  /donations/{id}:
    get:
      consumes:
      - application/json
      description: Get donation details by ID
      parameters:
      - description: Donation ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/donation.Donation'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Get donation by ID
      tags:
      - donations
    put:
      consumes:
      - application/json
      description: Update donation details by ID
      parameters:
      - description: Donation ID
        in: path
        name: id
        required: true
        type: string
      - description: Donation details
        in: body
        name: donation
        required: true
        schema:
          $ref: '#/definitions/donation.Donation'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update donation details
      tags:
      - donations
  /donors:
    get:
      consumes:
      - application/json
      description: Get a list of all donors
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/donor.Donor'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List all donors
      tags:
      - donors
    post:
      consumes:
      - application/json
      description: Create a new donor with the provided details
      parameters:
      - description: Donor details
        in: body
        name: donor
        required: true
        schema:
          $ref: '#/definitions/donor.Donor'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/donor.Donor'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Create a new donor
      tags:
      - donors
  /donors/{id}:
    get:
      consumes:
      - application/json
      description: Get donor details by ID
      parameters:
      - description: Donor ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/donor.Donor'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Get donor by ID
      tags:
      - donors
    put:
      consumes:
      - application/json
      description: Update donor details by ID
      parameters:
      - description: Donor ID
        in: path
        name: id
        required: true
        type: string
      - description: Donor details
        in: body
        name: donor
        required: true
        schema:
          $ref: '#/definitions/donor.Donor'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update donor details
      tags:
      - donors
  /organizers:
    get:
      consumes:
      - application/json
      description: Get a list of all organizers
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/organizer.Organizer'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List all organizers
      tags:
      - organizers
    post:
      consumes:
      - application/json
      description: Create a new organizer with the provided details
      parameters:
      - description: Organizer details
        in: body
        name: organizer
        required: true
        schema:
          $ref: '#/definitions/organizer.Organizer'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/organizer.Organizer'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Create a new organizer
      tags:
      - organizers
  /organizers/{id}:
    get:
      consumes:
      - application/json
      description: Get organizer details by ID
      parameters:
      - description: Organizer ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/organizer.Organizer'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: Get organizer by ID
      tags:
      - organizers
    put:
      consumes:
      - application/json
      description: Update organizer details by ID
      parameters:
      - description: Organizer ID
        in: path
        name: id
        required: true
        type: string
      - description: Organizer details
        in: body
        name: organizer
        required: true
        schema:
          $ref: '#/definitions/organizer.Organizer'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update organizer details
      tags:
      - organizers
  /permissions:
    get:
      consumes:
      - application/json
      description: Get a list of all permissions in the system
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/rbac.Permission'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: List all permissions
      tags:
      - permissions
  /roles:
    get:
      consumes:
      - application/json
      description: Get a list of all active roles in the system
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/rbac.Role'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: List all roles
      tags:
      - roles
  /roles/{name}:
    get:
      consumes:
      - application/json
      description: Get role details by role name
      parameters:
      - description: Role name
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rbac.Role'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: Get role by name
      tags:
      - roles
  /users:
    get:
      consumes:
      - application/json
      description: Get a list of all users
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/user.GetUserResponseDTO'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: List all users
      tags:
      - users
    post:
      consumes:
      - application/json
      description: Create a new user with the provided details
      parameters:
      - description: User details
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.RegisterDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/user.RegisterResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Create a new user
      tags:
      - users
  /users/{id}:
    get:
      consumes:
      - application/json
      description: Get user details by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.GetUserResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Get user by ID
      tags:
      - users
    put:
      consumes:
      - application/json
      description: Update user details by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: User details
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.UpdateUserDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update user details
      tags:
      - users
  /users/{id}/password:
    put:
      consumes:
      - application/json
      description: Update user's password
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: Password update details
        in: body
        name: passwords
        required: true
        schema:
          $ref: '#/definitions/user.UpdatePasswordDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.APIError'
      summary: Update user password
      tags:
      - users
  /users/me:
    get:
      consumes:
      - application/json
      description: Get current authenticated user's details including role information
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/user.MeResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.APIError'
      security:
      - BearerAuth: []
      summary: Get current user details
      tags:
      - users
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
